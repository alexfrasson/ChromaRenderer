package(default_visibility = ["//visibility:public"])

config_setting(
    name = "on_linux",
    constraint_values = [
        "@platforms//os:linux",
    ],
)

config_setting(
    name = "on_windows",
    constraint_values = [
        "@platforms//os:windows",
    ],
)

cc_library(
    name = "glfw",
    srcs = select({
        ":on_linux": ["lib/libglfw3.a"],
        ":on_windows": ["lib/glfw3.lib"],
    }),
    hdrs = glob(["include/**/*.h"]),
    includes = ["include"],
    linkopts = select({
        ":on_linux": ["-lX11 -ldl"],
        ":on_windows": [
            "-DEFAULTLIB:gdi32.lib",
            "-DEFAULTLIB:ole32.lib",
            "-DEFAULTLIB:propsys.lib",
            "-DEFAULTLIB:shlwapi.lib",
        ],
    }),
)
